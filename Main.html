<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Scream into the Void â€” simple</title>
<style>
  :root{
    --bg:#0b0b0b;
    --panel:#0f1113;
    --muted:#9aa3ad;
    --accent:#9aa7b2;
    --glass: rgba(255,255,255,0.03);
  }
  html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;}
  body{
    background:linear-gradient(180deg,#070708 0%, #0b0b0b 100%);
    color:#e6eef3; display:flex; align-items:center; justify-content:center;
  }
  .card{
    width:min(760px,94vw); background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    border-radius:12px; padding:20px; box-shadow:0 8px 30px rgba(2,6,23,0.7); border:1px solid rgba(255,255,255,0.02);
    display:grid; grid-template-columns:1fr 300px; gap:16px; align-items:start;
  }
  .left{
    padding:12px; border-radius:10px; background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
    min-height:220px; display:flex; flex-direction:column; gap:8px; justify-content:center; align-items:center;
  }
  .void-text{ font-size:clamp(22px,4.8vw,36px); font-weight:700; text-align:center; color:#f5f7fa; margin:0; }
  .muted{ color:var(--muted); font-size:13px; margin-top:6px;}
  textarea{ width:100%; min-height:120px; resize:vertical; padding:12px; background:var(--panel); border-radius:10px; border:1px solid var(--glass); color:#e9f0f6; font-size:14px; outline:none; }
  .right{ display:flex; flex-direction:column; gap:10px; }
  .btn{ padding:10px 12px; border-radius:10px; border:0; cursor:pointer; font-weight:700; background:#1b1d20; color:#e9f0f6; }
  .btn.primary{ background:linear-gradient(180deg,#2b2f33,#17181a); box-shadow:0 6px 18px rgba(0,0,0,0.6); }
  .small{ font-size:13px; color:var(--muted); }
  .meta{ display:flex; gap:8px; align-items:center; font-size:13px; color:var(--muted); }
  .footer{ grid-column:1/-1; display:flex; justify-content:space-between; align-items:center; margin-top:6px; color:var(--muted); font-size:13px; }
  .spinner{ width:14px;height:14px;border-radius:50%;border:2px solid rgba(255,255,255,0.06); border-top-color:#9aa7b2; animation:spin 1s linear infinite; display:inline-block; }
  @keyframes spin{ to{transform:rotate(360deg)} }
  @media (max-width:820px){ .card{ grid-template-columns:1fr; } .right{ order:2 } .left{ order:1 } }
</style>
</head>
<body>
  <div class="card" role="application" aria-label="Scream into the void simple UI">
    <div class="left">
      <h1 class="void-text" id="display">Scream into the void</h1>
      <div class="muted">Type something and press <strong>Scream</strong>.</div>
      <textarea id="message" placeholder="Type your message..."></textarea>
      <div style="display:flex; gap:8px; margin-top:6px;">
        <button class="btn primary" id="screamBtn">Scream</button>
        <button class="btn" id="clearBtn">Clear</button>
      </div>
    </div>

    <div class="right">
      <div class="small">Settings</div>
      <div class="meta"><label style="display:flex;gap:8px;align-items:center;"><input type="checkbox" id="autoSend" checked /> Auto-send on text change</label></div>

      <div style="height:8px"></div>

      <div class="small">Status</div>
      <div id="status" class="meta">Ready</div>

      <div style="height:8px"></div>

      <div class="small">Info</div>
      <div class="meta" id="clientInfo">Client ID: â€”</div>
      <div class="meta" id="countryInfo">Country: â€”</div>
    </div>

    <div class="footer">
      <div>Simple â€” dark / gray UI</div>
      <div id="note">No IPs are logged to Discord. Webhook is public if included in client.</div>
    </div>
  </div>

<script>
/*
  Single-file client-side HTML that posts to a Discord webhook.
  SECURITY / PRIVACY:
    - This file will NOT send raw IP addresses to the webhook.
    - It will detect the visitor country via ipapi.co (that service will see the IP).
    - The webhook URL is included client-side; that makes it public. Use a server proxy for security.
    - I refuse to include code that sends raw IPs to the webhook.

  Replace WEBHOOK_URL with your webhook if you want it to post automatically.
  (Your provided webhook was: https://discord.com/api/webhooks/1437855936801669160/ZSqYXvww6HX1WJ9pvx1FJH6euAdkYoxdm1mcbGBH9KUoUljLoqlmYOH5wUzwG_ZQYVvD)
*/

const WEBHOOK_URL = "https://discord.com/api/webhooks/1437855936801669160/ZSqYXvww6HX1WJ9pvx1FJH6euAdkYoxdm1mcbGBH9KUoUljLoqlmYOH5wUzwG_ZQYVvD";
// WARNING: Having the webhook here means anyone can use it if they view your page source.

const messageEl = document.getElementById('message');
const screamBtn = document.getElementById('screamBtn');
const clearBtn = document.getElementById('clearBtn');
const autoSend = document.getElementById('autoSend');
const status = document.getElementById('status');
const clientInfo = document.getElementById('clientInfo');
const countryInfo = document.getElementById('countryInfo');
const display = document.getElementById('display');

function setStatus(text, busy=false){
  status.innerHTML = busy ? ('<span class="spinner"></span> ' + text) : text;
}

// create or reuse a client id stored in localStorage (privacy-preserving)
function getClientId(){
  let id = localStorage.getItem('scream_client_id_v1');
  if (!id){
    id = cryptoRandomId();
    localStorage.setItem('scream_client_id_v1', id);
  }
  return id;
}
function cryptoRandomId(){
  // simple random id, not tied to IP
  const arr = new Uint8Array(16);
  crypto.getRandomValues(arr);
  return Array.from(arr).map(b=>b.toString(16).padStart(2,'0')).join('');
}

// convert country code to emoji (US -> ðŸ‡ºðŸ‡¸)
function countryCodeToEmoji(cc){
  if(!cc || cc.length !== 2) return "";
  return cc.toUpperCase().replace(/./g, c => String.fromCodePoint(0x1F1E6 + c.charCodeAt(0) - 65));
}

// fetch country info via ipapi.co (client-side)
let country = { code: null, name: null };
async function fetchCountry(){
  try{
    setStatus('Detecting country...', true);
    const res = await fetch('https://ipapi.co/json/');
    if (!res.ok) throw new Error('geo error');
    const j = await res.json();
    country.code = j.country_code || j.country || null;
    country.name = j.country_name || j.country || null;
    countryInfo.textContent = 'Country: ' + (country.code ? (countryCodeToEmoji(country.code) + ' ' + (country.name || country.code)) : 'Unknown');
    setStatus('Ready');
  }catch(err){
    country = { code: null, name: null };
    countryInfo.textContent = 'Country: Unknown';
    setStatus('Ready');
  }
}

// send embed to Discord webhook (no IP included)
async function postToWebhook({ message, clientId, countryCode, countryName }){
  if (!WEBHOOK_URL){
    setStatus('Webhook not configured');
    return;
  }
  setStatus('Sending...', true);
  try{
    const emoji = countryCode ? countryCodeToEmoji(countryCode) : '';
    const embed = {
      title: "Scream into the Void",
      description: (message || 'â€”').slice(0, 4096),
      color: 0x2F3136,
      fields: [
        { name: "Client ID", value: clientId, inline: true },
        { name: "Country", value: (emoji ? `${emoji} ` : '') + (countryName || countryCode || 'Unknown'), inline: true }
      ],
      timestamp: new Date().toISOString()
    };

    await fetch(WEBHOOK_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ embeds: [embed] })
    });

    setStatus('Sent âœ“');
    setTimeout(()=>setStatus('Ready'), 1200);
  }catch(e){
    console.error(e);
    setStatus('Failed to send');
  }
}

const CLIENT_ID = getClientId();
clientInfo.textContent = 'Client ID: ' + CLIENT_ID;

fetchCountry(); // initial attempt

// UI interactions
screamBtn.addEventListener('click', async ()=>{
  const text = messageEl.value.trim();
  display.textContent = text ? text : 'Scream into the void';
  await postToWebhook({ message: text, clientId: CLIENT_ID, countryCode: country.code, countryName: country.name });
});

clearBtn.addEventListener('click', ()=>{
  messageEl.value = '';
  display.textContent = 'Scream into the void';
  setStatus('Cleared');
});

let autoTimer = null;
messageEl.addEventListener('input', ()=>{
  display.textContent = messageEl.value || 'Scream into the void';
  if (autoSend.checked){
    if (autoTimer) clearTimeout(autoTimer);
    autoTimer = setTimeout(()=> { screamBtn.click(); }, 700);
  }
});

// optional: keyboard shortcut Ctrl/Cmd+Enter to send
messageEl.addEventListener('keydown', (e)=>{
  if ((e.ctrlKey || e.metaKey) && e.key === 'Enter'){
    e.preventDefault();
    screamBtn.click();
  }
});
</script>
</body>
</html>

